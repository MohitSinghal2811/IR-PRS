{% load static %}

{% comment %} {% if messages %}
    {% for message in messages %}
        <p>{{ message }}</p>
    {% endfor %}
{% endif %} {% endcomment %}

<form method="post">
    {% csrf_token %}

    <label>Coach Type</label>
    {{ ticket_form.coachType }}
    {% if ticket_form.coachType.errors %}
        {% for error in ticket_form.coachType.errors %}
            {{ error|escape }}
        {% endfor %}
    {% endif %}

    

    {{ passenger_formset.management_form }}

    {% for passenger_form in passenger_formset %}
        <div class="passenger-formset">
            {{ passenger_form.name }}
            {% if passenger_form.name.errors %}
                {% for error in passenger_form.name.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}

            {{ passenger_form.age }}
            {% if passenger_form.age.errors %}
                {% for error in passenger_form.age.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}

            {{ passenger_form.gender }}
            {% if passenger_form.gender.errors %}
                {% for error in passenger_form.gender.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}
        </div>
    {% endfor %}

    {% if passenger_formset.non_form_errors %}
        {% for error in passenger_formset.non_form_errors %}
            {{ error|escape }}
        {% endfor %}
    {% endif %}

    <input type="submit" value="Book Ticket" class="button"/>
</form>

<!-- Include formset plugin - including jQuery dependency -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.formset/1.2.2/jquery.formset.js"></script>
<script>
    $('.passenger-formset').formset({
        addText: 'add passenger',
        deleteText: 'remove'
    });
</script>